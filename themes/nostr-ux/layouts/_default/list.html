{{ define "main" }}
<div class="page-header">
  <div class="container">
    <h1>{{ .Title }}</h1>
    {{ with .Params.description }}
    <p class="page-description">{{ . }}</p>
    {{ end }}
  </div>
</div>

<div class="container">
  <div class="content">
    {{ .Content }}

    {{ if eq .Section "patterns" }}
    <div class="pattern-list">
      {{ range .Pages.ByParam "patternNumber" }}
      <article class="pattern-list-item">
        <div class="pattern-meta">
          <span class="pattern-number">Pattern {{ .Params.patternNumber }}</span>
        </div>
        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        {{ with .Params.problem }}<p class="meta-item"><strong>Problem:</strong> {{ . }}</p>{{ end }}
        {{ with .Params.impact }}<p class="meta-item"><strong>Impact:</strong> {{ . }}</p>{{ end }}
        {{ with .Params.solution }}<p class="meta-item"><strong>Solution:</strong> {{ . }}</p>{{ end }}
        <a href="{{ .RelPermalink }}" class="read-more">Read Full Pattern â†’</a>
      </article>
      {{ end }}
    </div>
    {{ else }}
    <div class="page-list">
      {{ range .Pages }}
      <article class="page-list-item">
        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        {{ with .Description }}<p>{{ . }}</p>{{ end }}
      </article>
      {{ end }}
    </div>
    {{ end }}
  </div>
</div>
{{ end }}
